@page "/register"
@inject IUserService UserService
@inject NavigationManager NavigationManager

<div style="padding-top: 6%;" class="page-container">
    <MudContainer Class="justify-content-center">
        <EditForm Model="@user" OnValidSubmit="HandleRegistration">
            <DataAnnotationsValidator />
            <MudGrid Justify="Justify.Center">
                <MudItem xs="12" sm="7">
                    <MudCard>
                        <MudCardHeader Class="justify-content-center">
                            <MudText Align="Align.Center" Typo="Typo.h4">Registration</MudText>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudTextField Label="Email Address" Class="mt-3"
                            @bind-Value="user.Email" For="@(() => user.Email)" />
                            <MudTextField Label="Password" HelperText="Choose a strong password" Class="mt-3"
                            @bind-Value="user.Password" For="@(() => user.Password)" InputType="InputType.Password" />
                            <MudTextField Label="Confirm Password" HelperText="Repeat the password" Class="mt-3"
                            @bind-Value="user.ConfirmPassword" For="@(() => user.ConfirmPassword)" InputType="InputType.Password" />
                        </MudCardContent>
                        <MudCardActions Class="align-content-center">
                            <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Text" Color="Color.Default" FullWidth="true" Class="ml-auto">Register</MudButton>
                        </MudCardActions>
                    </MudCard>
                </MudItem>
                <MudItem xs="6" sm="7">
                    @if (success)
                    {
                        <MudText Align="Align.Center" Color="Color.Success">User account created successfully!</MudText>
                    }
                    else
                    {
                        <MudText Color="@Color.Error" Align="Align.Center">
                            <ValidationSummary />
                        </MudText>
                    }
                </MudItem>
                <MudItem xs="6" sm="7">
                    <MudButton OnClick="GoToLogin">Sign In</MudButton>
                </MudItem>
            </MudGrid>
        </EditForm>
    </MudContainer>
</div>
