@page "/order/{orderId:int}"
@inject IOrderService _orderService
@inject IBreadcrumbService _breadcrumbService
@inject NavigationManager _navigationManager

<div class="breadcrumbs-container">
    <ul class="breadcrumbs">
        @foreach (var breadcrumb in _breadcrumbService.Breadcrumbs)
        {
            <li class="breadcrumb-item"><a href="@breadcrumb.Link">@breadcrumb.Label</a></li>
        }
    </ul>
</div>
<div style="margin-top: 30px; margin-bottom: 30px; margin-left: 20px;">
    <MudText Typo="Typo.h4">Order Details</MudText>
</div>

@if (order == null)
{
    <Loading />
}
else
{
    <MudContainer Class="page-container" Style="margin-left: 0;">
        <MudGrid>
            <MudItem xs="12" md="6">
                <MudTable Items="@order.Items">
                    <HeaderContent>
                        <MudTh>ORDER ITEMS</MudTh>
                        <MudTh>QUANTITY</MudTh>
                        <MudTh></MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd>
                            <div class="item-box">
                                <img src="@context.ImageUrl" class="item-image" />
                                <div class="item-name">
                                    <MudText Typo="Typo.h5">
                                        <a href="/item/@context.ItemId">@context.Name</a>
                                    </MudText>
                                </div>
                            </div>
                        </MudTd>
                        <MudTd>@context.Quantity</MudTd>
                    </RowTemplate>
                </MudTable>
            </MudItem>
            <MudItem xs="12" md="6">
                <MudPaper Class="mud-p-2">
                    <div class="order-info">
                        <h2 style="padding-top: 1%; padding-bottom: 1%;">Order Summary</h2>
                        <MudText Typo="Typo.body1">Order ID: @OrderId</MudText>
                        <MudText Typo="Typo.body1">Date: @order.OrderDate</MudText>
                        <MudText Typo="Typo.body1">Total Price: $@order.TotalPrice</MudText>
                    </div>
                </MudPaper>
                <div class="cancel-order-button">
                    <MudButton Variant="Variant.Outlined" Color="Color.Error" OnClick="CancelOrder">Cancel Order</MudButton>
                </div>
            </MudItem>
        </MudGrid>
    </MudContainer>
}