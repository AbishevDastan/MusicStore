@page "/change-password"
@attribute [Authorize]
@inject IUserService UserService

<div class="page-container">
    <div style="margin-top: 6%;">
        <MudContainer Class="justify-content-center">
            <EditForm Model="request" OnValidSubmit="ProvideNewPassword">
                <DataAnnotationsValidator />
                <MudGrid Justify="Justify.Center">
                    <MudItem xs="12" sm="7">
                        <MudCard>
                            <MudCardHeader Class="justify-content-center">
                                <MudText Align="Align.Center" Typo="Typo.h4">Change Password</MudText>
                            </MudCardHeader>
                            <MudCardContent>
                                <MudTextField Label="NewPassword" HelperText="Enter your password." Class="mt-3"
                                              @bind-Value="request.Password" For="@(() => request.Password)" InputType="InputType.Password" />
                                <MudTextField Label="ConfirmNewPassword" HelperText="Enter your password." Class="mt-3"
                                              @bind-Value="request.ConfirmPassword" For="@(() => request.ConfirmPassword)" InputType="InputType.Password" />
                            </MudCardContent>
                            <MudCardActions Class="align-content-center">
                                <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Default" FullWidth="true" Class="ml-auto">Change Password</MudButton>
                            </MudCardActions>
                        </MudCard>
                    </MudItem>
                    <MudItem xs="6" sm="7">
                        @if (success)
                        {
                            <MudText Align="Align.Center" Color="Color.Success">Your password has been changed successfully!</MudText>
                        }
                        else
                        {
                            <MudText Color="@Color.Error" Align="Align.Center">
                                <ValidationSummary />
                            </MudText>
                        }
                    </MudItem>
                </MudGrid>
            </EditForm>
        </MudContainer>
    </div>
</div>